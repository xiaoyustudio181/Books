<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>庄子</title>
    <style>
        @import "../../dist/css/bootstrap.min.css";
        @import "../../css/common.css";

        .panel-heading {
            cursor: pointer;
        }
    </style>
    <script src="../../js/jquery-3.0.0.min.js"></script>
    <script src="../../dist/js/bootstrap.min.js"></script>
</head>
<body>
<div id="menu">
    <p><a href="../../index.html" class="btn btn-default" id='back'>返回书库(S)</a></p>
</div>
<div class="container">
    <div class="jumbotron">
        <h1>庄子</h1>
    </div>

    <div class="row">
        <div class="col-sm-2"></div>
        <div class="col-sm-8">
            <div class="panel-group" role="tablist" aria-multiselectable="true">

                <script src="data.js"></script>
                <script>
                  var datum = null;
                  var title = '';
                  var chapter_counter = 0;
                  var links = '';

                  for (var i = 0; i < data.length; i++) {
                    datum = data[i];
                    if (datum.title !== title && i !== 0 || i === (data.length - 1)) {//上一章完结
                      chapter_counter++;
                      if (i === (data.length - 1)) {//最后一章
                        links += '<a href="zhuangzi.html?' + (i + 1) + '" class="list-group-item">' + datum.title2 + '</a>\n';
                      }
                      document.write('<div class="panel panel-default">\n' +
                          '                    <div  class="panel-heading" role="tab" id="num' + chapter_counter + '">\n' +
                          '                        <h4 class="panel-title">\n' +
                          '                            <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse' + chapter_counter + '" aria-expanded="false" aria-controls="collapse1" class="collapsed num' + chapter_counter + '">\n' +
                          '                                ' + title + '\n' +
                          '                            </a>\n' +
                          '                        </h4>\n' +
                          '                    </div>\n' +
                          '                    <div id="collapse' + chapter_counter + '" class="panel-collapse collapse" role="tabpanel" aria-labelledby="" aria-expanded="false" style="height: 0px;">\n' +
                          '                        <div class="panel-body">\n' +
                          '                            <div class="list-group">\n' + links +
                          '                            </div>\n' +
                          '                        </div>\n' +
                          '                    </div>\n' +
                          '                </div>');
                      links = '';
                    }
                    title = datum.title;
                    links += '<a href="zhuangzi.html?' + (i + 1) + '" class="list-group-item">' + datum.title2 + '</a>\n';
                  }
                </script>

            </div>
        </div>
    </div>
</div>

</body>

<script>
  var titles = [];
  for (var i = 1; i <= chapter_counter; i++) {
    titles.push('num' + i);
  }
  //绑定点击事件
  titles.forEach(function (title) {
    document.getElementById(title).addEventListener('click', function () {
      $('a.' + title).trigger('click');
    });
  });

  //热键
  document.onkeydown = function (e) {
    if (e.key == 's') {//返回
      document.getElementById('back').click();
    }
  };
</script>
</html>