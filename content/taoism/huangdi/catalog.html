<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>黄帝四经</title>
    <style>
        @import "../../../dist/css/bootstrap.min.css";
        @import "../../../css/common.css";

        .panel-heading{
            cursor: pointer;
        }
    </style>
    <script src="../../../js/jquery-3.0.0.min.js"></script>
    <script src="../../../dist/js/bootstrap.min.js"></script>
</head>
<body>
<div id="menu">
    <p><a href="../../../home.html" class="btn btn-default" id='back'>返回书库(S)</a></p>
    <p><a href="./all.html" class="btn btn-default" id='all'>全书一览(D)</a></p>
</div>
<div class="container">
    <div class="jumbotron">
        <h1>黄帝四经</h1>
    </div>
    <div class="row">
        <div class="col-sm-2"></div>
        <div class="col-sm-8">
            <div class="panel-group" role="tablist" aria-multiselectable="true">
                <script src="data.js"></script>
                <script>
                  var datum = null;
                  var title = '';
                  var chapter_counter = 0;
                  var links = '';

                  for (var i = 0; i < data.length; i++) {
                    if (i === data.length || i === data.length - 1) continue;//忽略倒数第一二个数据块
                    datum = data[i];
                    if (datum.title !== title && i !== 0 || i === (data.length - 1)) {//上一章完结
                      chapter_counter++;
                      if (i === (data.length - 1)) {//最后一章
                        links += '<a href="main.html?' + (i + 1) + '" class="list-group-item">' + datum.title2 + '</a>\n';
                      }
                      document.write('<div class="panel panel-default">\n' +
                        '                    <div  class="panel-heading" role="tab" id="num' + chapter_counter + '">\n' +
                        '                        <h4 class="panel-title">\n' +
                        '                            <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse' + chapter_counter + '" aria-expanded="false" aria-controls="collapse1" class="collapsed num' + chapter_counter + '">\n' +
                        '                                ' + title + '\n' +
                        '                            </a>\n' +
                        '                        </h4>\n' +
                        '                    </div>\n' +
                        '                    <div id="collapse' + chapter_counter + '" class="panel-collapse collapse" role="tabpanel" aria-labelledby="" aria-expanded="false" style="height: 0px;">\n' +
                        '                        <div class="panel-body">\n' +
                        '                            <div class="list-group">\n' + links +
                        '                            </div>\n' +
                        '                        </div>\n' +
                        '                    </div>\n' +
                        '                </div>');
                      links = '';
                    }
                    title = datum.title;
                    links += '<a href="main.html?' + (i + 1) + '" class="list-group-item">' + datum.title2 + '</a>\n';
                  }
                </script>

                <div class="panel panel-default">
                    <div  class="panel-heading" role="tab" id="chengjing">
                        <h4 class="panel-title">
                            <a role="button" data-toggle="collapse" data-parent="#accordion" aria-expanded="false" aria-controls="collapse1" class="collapsed shiliujing">
                                称经
                            </a>
                        </h4>
                    </div>
                </div>

                <div class="panel panel-default">
                    <div  class="panel-heading" role="tab" id="daoyuanjing">
                        <h4 class="panel-title">
                            <a role="button" data-toggle="collapse" data-parent="#accordion" aria-expanded="false" aria-controls="collapse1" class="collapsed shiliujing">
                                道原经
                            </a>
                        </h4>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

</body>
<script>
  //快捷键
  document.onkeydown = function (e) {
    if(!e.ctrlKey){
      if (e.key == 's') {//返回
        document.getElementById('back').click();
      }
      if (e.key == 'd') {//全书一览
        document.getElementById('all').click();
      }
    }
  };

    var titles = [];
    for (var i = 1; i <= chapter_counter; i++) {
      titles.push('num' + i);
    }
    //绑定点击事件
    titles.forEach(function (title) {
      document.getElementById(title).addEventListener('click', function () {
        $('a.' + title).trigger('click');
      });
    });


    document.getElementById('chengjing').addEventListener('click',function () {
      location.href='main.html?25';
    });
    document.getElementById('daoyuanjing').addEventListener('click',function () {
      location.href='main.html?26';
    });
</script>
</html>