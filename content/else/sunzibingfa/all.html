<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>孙子兵法</title>
    <style>
        @import "../../../dist/css/bootstrap.min.css";
        @import "../../../css/common.css";
        @import "../../../css/all.css";
    </style>
    <script src="../../../js/jquery-3.0.0.min.js"></script>
</head>
<body>
<div id="menu">
    <p><a href="./catalog.html" class="btn btn-default" id="back">返回目录(S)</a></p>
    <p><a id="open_all" class="btn btn-default">显示译文(D)</a></p>
    <p><a id="close_all" class="btn btn-default">隐藏译文(A)</a></p>
</div>
<div class="container">
    <div class="jumbotron">
        <h1>孙子兵法</h1>
    </div>
    <div class="myfont">
        <script src="data.js"></script>
        <script>
          var datum = null;
          for (var i = 0; i < data.length; i++) {
            datum = data[i];
            document.write('<div class="row">\n' +
                '            <div class="col-sm-1"></div>\n' +
                '            <div class="col-sm-10">\n' +
                '                <p class="chapter"> ' + datum.title + ' <span class="open_translation">隐藏译文</span></p>\n' +
                '                <p class="content">　　' + datum.content + '</p>\n' +
                '                <p class="translation">[译文]<br/>　　' + datum.translation + '</p>\n' +
                '            </div>\n' +
                '        </div>');
          }
        </script>
    </div>
</div>
</body>
<script>
  $('.open_translation').on('click', function () {
    $(this).parent().next().next().slideToggle(100);
    if ($(this).text() == '显示译文') {
      $(this).text('隐藏译文');
    } else {
      $(this).text('显示译文');
    }
  });

  $('#open_all').on('click', function () {
    var $close = $('.open_translation')
    $close.parent().next().next().show();
    $close.text('隐藏译文');
  });

  $('#close_all').on('click', function () {
    var $open = $('.open_translation');
    $open.parent().next().next().hide();
    $open.text('显示译文');
  });

  //快捷键
  document.onkeydown = function (e) {
    if(!e.ctrlKey){
      if (e.key === 's') {//返回
        document.getElementById('back').click();
      }
      if (e.key === 'a') {//折叠所有
        document.getElementById('close_all').click();
      }
      if (e.key === 'd') {//展开所有
        document.getElementById('open_all').click();
      }
    }
  };
</script>
</html>